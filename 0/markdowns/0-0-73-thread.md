
# Post \#71063619 [Link](https://stackoverflow.com/questions/71063619/)

## React and Tailwind CSS: dynamically generated classes are not being applied

**Vote**: 9 (409/702) **Views**: 12717 (386/702) 

**Internal ID** \#0-0-73

Created at 2022-02-10 10:39:14

Tags: `reactjs` `tailwind-css`

----------

#### Metadata:

Area: `Front-end`

Language: `javascript` (full parsed tag list: `javascript`)

----------

**Notepad**


----------

I'm just learning React and Tailwind CSS and had a strange experience with CSS grid using Tailwind classes. I've made the buttons for a calculator, with the last Button spanning two columns:

```
export default function App() {
  return (
    <div className="flex min-h-screen items-center justify-center bg-blue-400">
      <Calculator />
    </div>
  );
}
```


```
import { IoBackspaceOutline } from "react-icons/io5";

export const Calculator = () => {
  return (
    <div className="grid grid-cols-4 grid-rows-5 gap-2">
      <Button>AC</Button>
      <Button>
        <IoBackspaceOutline size={26} />
      </Button>
      <Button>%</Button>
      <Button>รท</Button>
      <Button>7</Button>
      <Button>8</Button>
      <Button>9</Button>
      <Button>x</Button>
      <Button>4</Button>
      <Button>5</Button>
      <Button>6</Button>
      <Button>-</Button>
      <Button>1</Button>
      <Button>2</Button>
      <Button>3</Button>
      <Button>+</Button>
      <Button>0</Button>
      <Button>.</Button>
      <Button colSpan={2}>=</Button>
    </div>
  );
};

const Button = ({ colSpan = 1, rowSpan = 1, children }) => {
  return (
    <div
      className={`col-span-${colSpan} row-span-${rowSpan} bg-white p-3 rounded`}
    >
      <div className="flex items-center justify-center">{children}</div>
    </div>
  );
};
```

This doesn't work (tested in Chrome):
[](https://i.stack.imgur.com/W2M9X.png)
Now here comes the weird part. I replaced the returned JSX from the App component with HTML from a Tailwind tutorial and deleted it again.
```
<div className="bg-blue-400 text-blue-400 min-h-screen flex items-center justify-center">
  <div className="grid grid-cols-3 gap-2">
    <div className="col-span-2 bg-white p-10 rounded">1</div>
    <div className="bg-white p-10 rounded">2</div>
    <div className="row-span-3 bg-white p-10 rounded">3</div>
    <div className="bg-white p-10 rounded">4</div>
    <div className="bg-white p-10 rounded">5</div>
    <div className="bg-white p-10 rounded">6</div>
    <div className="col-span-2 bg-white p-10 rounded">7</div>
    <div className="bg-white p-10 rounded">8</div>
    <div className="bg-white p-10 rounded">9</div>
  </div>
</div>
```

After I Ctrl-Z'd a bunch of times, so I had only the previous code, my button suddenly spans two columns as intended:
[](https://i.stack.imgur.com/WAkNA.png)
I checked to make sure that there were no changes in the code:
[](https://i.stack.imgur.com/7oDDw.png)
My friend even cloned [my repo](https://github.com/asgervelling/col-span-bug/), followed the same steps and got the same result.
He suspects that it has something to do with the variable classNames in my Button component with regards to Tailwind's JIT compiler, but none of us can pinpoint the error.
Am I using variable CSS classes wrong?
This has been a WTF moment. What could be the reason for this?


----------
        
## Answer \#0

**Accepted** Vote: 13

Created at 2022-02-10 16:39:38

------------

The CSS file generated by Tailwind will only include classes that it recognizes when it scans your code, which means that dynamically generated classes (e.g. `col-span-${colSpan}`) will not be included.
If you only need to span 2 columns, you could pass boolean values which will trigger the addition of a full `col-span-2` or `row-span-2` utility class to be added:
```
const Button = ({ colSpan = false, rowSpan = false, children }) => {
  return (
    <div
      className={`${colSpan ? 'col-span-2' : ''} ${rowSpan ? 'row-span-2' : ''} bg-white p-3 rounded`}
    >
      <div className="flex items-center justify-center">{children}</div>
    </div>
  );
};
```

Otherwise, you could pass the values as classes to the Button component:
```
<Button className='col-span-2 row-span-1'>=</Button>

const Button = ({ className, children }) => {
  return (
    <div
      className={`${className} bg-white p-3 rounded`}
    >
      <div className="flex items-center justify-center">{children}</div>
    </div>
  );
};
```

More information: [https://tailwindcss.com/docs/content-configuration#dynamic-class-names](https://tailwindcss.com/docs/content-configuration#dynamic-class-names)


------------
    
    
## Answer \#1

 Vote: 6

Created at 2022-10-20 16:41:34

------------

As Ed Lucas said:
`The CSS file generated by Tailwind will only include classes that it recognizes when it scans your code, which means that dynamically generated classes (e.g. col-span-${colSpan}) will not be included`
But now could use [safeListing](https://tailwindcss.com/docs/content-configuration#safelisting-classes)
and
[tailwind-safelist-generator package](https://www.npmjs.com/package/tailwind-safelist-generator) to "pregenerate" our dynamics styles.
With tailwind-safelist-generator, you can generate a safelist.txt file for your theme based on a set of patterns.
> Tailwind's JIT mode scans your codebase for class names, and generates
CSS based on what it finds. If a class name is not listed explicitly,
like text-${error ? 'red' : 'green'}-500, Tailwind won't discover it.
To ensure these utilities are generated, you can maintain a file that
lists them explicitly, like a safelist.txt file in the root of your
project.


------------
    
    
## Answer \#2

 Vote: 5

Created at 2022-05-11 14:37:19

------------

Another tricky solution that worked for me is to use variable with forced type of the possible className values (in typescript) like :
```
export type TTextSizeClass =
  'text-xl'  |
  'text-2xl' |
  'text-3xl' |
  'text-4xl' |
  'text-5xl' |
  'text-6xl' |
  'text-7xl' |
  'text-8xl' |
  'text-9xl'
;
...
const type : number = 6 ;
const textSizeClass : TTextSizeClass = type != 1 ? `text-${type}xl` : 'text-xl';
...
<div className={`font-semibold ${textSizeClass} ${className}`}>text</div>
```



------------
    
    