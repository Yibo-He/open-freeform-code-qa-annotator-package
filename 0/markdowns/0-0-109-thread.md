
# Post \#59305534 [Link](https://stackoverflow.com/questions/59305534/)

## Parse JSON with undefined value?

**Vote**: -3 (702/702) **Views**: 17804 (324/702) 

**Internal ID** \#0-0-109

Created at 2019-12-12 13:18:15

Tags: `javascript` `json` `undefined`

----------

#### Metadata:

Area: `Front-end`

Language: `javascript` (full parsed tag list: `javascript`)

----------

**Notepad**


----------

>  [Parsing or fixing JSONs with special 'undefined' values?](https://stackoverflow.com/questions/59304404/parsing-or-fixing-jsons-with-special-undefined-value/)

I would like to know if it's possible to parse something like`javascript JSON.parse('{ "name": undefined}');`
generated by the API?

The above code errors. 

Is there some way of parsing it? - my actual example is  longer (see [here](https://pastebin.com/98KGhTmf)), I just use the very short example for illustrative purposes

Note: 

- [Here](https://www.seek.com.au/jobs?keywords=R%20"data%20scientist"%20?sortmode=ListedDate)- [Here](https://pastebin.com/bgZihV4U)`Single Column Serp v3``Single undefined Column Serp v3``undefined`


----------
        
## Answer \#0

**Accepted** Vote: 2

Created at 2019-12-16 15:03:29

------------

You  parse a JSON with an undefined value; undefined is special. In fact, `undefined` as a "value" must not occur in valid JSON. The error might have happened on the JSON generator instead.

The official source, [The JSON Data](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf)
Interchange Syntax, states that 

> A JSON value can be an object, array, number, string, true, false, or null.

The best remedy is to examine the JSON generator and why it generates undefined in a JSON.


------------
    
    
## Answer \#1

 Vote: 3

Created at 2019-12-12 13:31:03

------------

```
let a = {"test": 1}
let b = JSON.stringify(a)
console.log(JSON.stringify(a)) // "{"test": 1}"
console.log(JSON.parse(b)) // {"test": 1}
```


whereas with undefined

```
let a = {"test": undefined}
let b = JSON.stringify(a)
console.log(JSON.stringify(a)) // "{}"
console.log(JSON.parse(b)) // {}
```


JSON.stringify with `undefined`

```
let b = JSON.stringify(undefined)
console.log(b) // undefined
```


If you try to parse `undefined`

```
console.log(JSON.parse("undefined"))
VM101:1 Uncaught SyntaxError: Unexpected token u in JSON at position 0
    at JSON.parse (<anonymous>)
    at <anonymous>:1:6
```


> Above error occurs as undefined is not valid JSON.

So to conclude, it is not possible to do that.


------------
    
    
## Answer \#2

 Vote: 1

Created at 2019-12-12 13:57:55

------------


## This is not a solution, this is a patch to a pretty significant bug!



You should fix/replace the lib that generates invalid JSON.

```
const jsonLike = `{"key1": undefined, "key2": "with an undefined state, also dealing with \\"nested quotes\\""}`;

// find some placeholder, a sequence that is not included in the current json
let placeholder, jsonPlaceholder = "";

while (jsonLike.indexOf(jsonPlaceholder) !== -1) {
  placeholder = Date.now() + Math.random().toString(36);
  jsonPlaceholder = JSON.stringify(placeholder);
}

// replace the keyword with the placeholder string
const json = jsonLike.replace(
  /"(?:\\[^]|[^"\\])*"|(undefined)/gi, 
  (match, isUndefined) => isUndefined ? jsonPlaceholder : match
);
console.log(json);

// parse the JSON and replace the placeholder with the JS value
const data = JSON.parse(json, (key, value) => value === placeholder ? undefined : value);
console.log(data);
```




------------
    
    
## Answer \#3

 Vote: 0

Created at 2019-12-12 13:48:18

------------

Lets Say you have Object like below

```
Obj = {a:1, b:2}
```


And, if you try to access `Obj['c']`, the value will be Undefined.

 means it does not exist. You don't have to mention `{name:undefined}`. If you leave it as it, it's value always be undefined unless you define it.


------------
    
    
## Answer \#4

 Vote: 0

Created at 2020-03-28 14:48:59

------------

So, I have a Solution which I used in My Project : [https://covid19info.web.app](https://covid19info.web.app) .

!!!  !!!

```
var xmlhttp = new XMLHttpRequest();
        var url = "https://covidapi.info/api/v1/country/IND/latest";

        xmlhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                var jon = JSON.parse(this.responseText);
                var on = JSON.stringify(jon)
                var varx = on.length
                var jsonp = on.substring(34, varx);
                var jsonr = jsonp.substring(0, jsonp.length - 2);
                var json = JSON.parse(jsonr);
                var total = json.confirmed
                var died = json.deaths
                var cured = json.recovered
                document.getElementById("countin").innerHTML = "COVID 19 (INDIA) Cases : " + total;
                document.getElementById("deathsin").innerHTML = "COVID 19 (INDIA) Deaths : " + died;
                document.getElementById("recoverin").innerHTML = "COVID 19 (INDIA) Recovered : " + cured;
            }
        };

        xmlhttp.open("GET", url, true);
        xmlhttp.send();
    }
```


I told u the whole functions cuz's it not so much important


------------
    
    