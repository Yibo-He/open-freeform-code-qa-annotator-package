
# Post \#61338539 [Link](https://stackoverflow.com/questions/61338539/)

## How to use enum value in asdict function from dataclasses module

**Vote**: 26 (219/702) **Views**: 22270 (281/702) 

**Internal ID** \#1-3-278

Created at 2020-04-21 07:55:54

Tags: `python` `enums` `python-dataclasses`

----------

#### Metadata:

Area: `Data Science & Machine Learning`

Language: `python` (full parsed tag list: `python`)

----------

**Notepad**


----------

I have a dataclass with a field `template` of type Enum. When using the `asdict` function it converts my dataclass to a dictionary. Is it possible to use the [value](https://docs.python.org/3/library/enum.html#programmatic-access-to-enumeration-members-and-their-attributes) attribute of `FoobarEnum` to return the string value instead of the Enum object?

My initial idea was to use the [dict_factory=dict](https://docs.python.org/3/library/dataclasses.html#dataclasses.asdict) parameter of the `asdict` function and provide my own factory but I couldn't figure out how to do this.

```
from dataclasses import dataclass, asdict
from enum import Enum


@dataclass
class Foobar:
  name: str
  template: "FoobarEnum"


class FoobarEnum(Enum):
  FIRST = "foobar"
  SECOND = "baz"


foobar = Foobar(name="John", template=FoobarEnum.FIRST)

print(asdict(foobar))
```


Current output:

```
{'name': 'John', 'template': <FoobarEnum.FIRST: 'foobar'>}
```


Goal:

```
{'name': 'John', 'template': 'foobar'}
```



----------
        
## GPT3.5 Attempt \#0

Yes, you can achieve this by providing a custom function to the `asdict` function's `dict_factory` parameter. Here's an example of how you can modify your code to achieve your goal:

```
from dataclasses import dataclass, asdict
from enum import Enum


@dataclass
class Foobar:
    name: str
    template: "FoobarEnum"


class FoobarEnum(Enum):
    FIRST = "foobar"
    SECOND = "baz"


def enum_to_str(value):
    if isinstance(value, Enum):
        return value.value
    return value


foobar = Foobar(name="John", template=FoobarEnum.FIRST)

print(asdict(foobar, dict_factory=lambda d: {k: enum_to_str(v) for k, v in d.items()}))
```

In this modified code, we define a new function `enum_to_str` that takes a value and checks if it's an instance of an Enum. If it is, it returns the value of the Enum object, otherwise it returns the original value. We then pass this function as the `dict_factory` parameter to the `asdict` function. This function is called for each item in the dictionary generated by `asdict`, and it converts any Enum objects to their string values.

--------

## GPT3.5 Attempt \#1

Yes, you can achieve this by providing a custom `asdict` factory function that converts the `Enum` object to its value attribute. Here's an example:

```
from dataclasses import dataclass, asdict
from enum import Enum


@dataclass
class Foobar:
    name: str
    template: "FoobarEnum"


class FoobarEnum(Enum):
    FIRST = "foobar"
    SECOND = "baz"


def enum_asdict_factory(obj):
    if isinstance(obj, Enum):
        return obj.value
    else:
        return obj


foobar = Foobar(name="John", template=FoobarEnum.FIRST)

print(asdict(foobar, dict_factory=enum_asdict_factory))
```

Output:

```
{'name': 'John', 'template': 'foobar'}
```

In this example, we define a custom factory function `enum_asdict_factory` that checks if the object being converted is an instance of `Enum`. If it is, it returns the value attribute of the `Enum` object. Otherwise, it returns the object unchanged.

We pass this factory function to the `asdict` function using the `dict_factory` parameter. This tells `asdict` to use our custom factory function instead of the default one.

--------

## GPT3.5 Attempt \#2

Yes, you can achieve this by providing a custom `asdict` function that converts the `Enum` object to its string value. Here's an example:

```
from dataclasses import dataclass, asdict
from enum import Enum


@dataclass
class Foobar:
  name: str
  template: "FoobarEnum"


class FoobarEnum(Enum):
  FIRST = "foobar"
  SECOND = "baz"


def asdict_with_enum_value(obj):
    def convert_value(value):
        if isinstance(value, Enum):
            return value.value
        return value
    return asdict(obj, dict_factory=dict, dict=convert_value)


foobar = Foobar(name="John", template=FoobarEnum.FIRST)

print(asdict_with_enum_value(foobar))
```

Output:
```
{'name': 'John', 'template': 'foobar'}
```

In this example, we define a new function `asdict_with_enum_value` that takes an object and returns a dictionary with the same fields, but with the `Enum` values converted to their string values. The `convert_value` function is used to convert each value in the dictionary. If the value is an `Enum`, we return its `value` attribute, otherwise we return the original value. Finally, we call `asdict` with the `dict_factory` parameter set to `dict` and the `dict` parameter set to our `convert_value` function.

--------
