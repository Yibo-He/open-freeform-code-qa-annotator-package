
# Post \#54391120 [Link](https://stackoverflow.com/questions/54391120/)

## How to download the latest build artifacts from Azure DevOps programmatically?

**Vote**: 70 (95/702) **Views**: 67627 (128/702) 

**Internal ID** \#2-6-399

Created at 2019-01-27 17:52:22

Tags: `c#` `.net` `azure` `azure-devops` `azure-artifacts`

----------

#### Metadata:

Area: `Back-end`

Language: `c#` (full parsed tag list: `c#`)

----------

**Notepad**


----------

I have a .NET C# application and I would like to download the latest artifacts generated by the latest build of this public Azure DevOps project:

[https://dev.azure.com/LumiaWoA/Boot%20Shim/_build?definitionId=3](https://dev.azure.com/LumiaWoA/Boot%20Shim/_build?definitionId=3)

How does one interface with Azure DevOps to download the artifacts for such a task? 

I have in mind to use an HttpClient to download the zipped artifacts using some special URL.


----------
        
## Answer \#0

**Accepted** Vote: 31

Created at 2019-01-27 17:56:21

------------

You would need to use Azure DevOps REST Api for that. This rest call retrieves artifacts from the build:

```
GET https://dev.azure.com/{organization}/{project}/_apis/build/builds/{buildId}/artifacts?artifactName={artifactName}&api-version=5.0
```


this REST call would give you latest build:

```
GET https://dev.azure.com/{organization}/{project}/_apis/build/latest/{definition}?branchName={branchName}&api-version=5.0-preview.1
```


[Here's an article (with some samples)](https://learn.microsoft.com/en-us/rest/api/azure/devops/?view=azure-devops-rest-5.0#create-the-request) talking about how you would authenticate to the API. As from the code perspective, its a simple HTTP request, so should be fairly easy.


------------
    
    
## Answer \#1

 Vote: 99

Created at 2019-10-09 16:39:53

------------

In the `Pipelines` when one selects a successful run and drills down to `Agent job X` and selects that agent, it can be found in the log information of that agent. 

In the agent `Job Information`, one can get a link to the download location where items can be downloaded thanks to the `X artifact produced` link:

[](https://i.stack.imgur.com/PIsva.png)


------------
    
    
## Answer \#2

 Vote: 17

Created at 2019-08-22 07:00:03

------------

Here are the steps to download latest artifacts of DevOps build using Azure DevOps UI.

1. Click on build logs.
2. Next, click on summary option of the build.
3. After step 2, on top right side of UI, Artifacts option would be visible, so click on that.
4. Next, select drop to download the ZIP of the latest artifacts of the build.


Using the beta UI as of 2019-11-09, the steps are as follows.

1. Click on the completed build (not the whole pipeline) and you will be taken to the Summary tab on the Build page.
2. In the top box, to the extreme right, click the link under the Artifacts column. Itâ€™s an icon of a box with text like 1 published. You will then be taken to the Artifacts page.
3. The page displays all the available artifacts. Click the download icon to download any of the artifacts.




------------
    
    
## Answer \#3

 Vote: 11

Created at 2021-07-23 08:39:04

------------

Pick your pipeline
[](https://i.stack.imgur.com/VLWew.png)
Select your run.
[](https://i.stack.imgur.com/xs9aQ.png)
Now look for Published. Click it. If something is there, you should be able to download it.
[](https://i.stack.imgur.com/JXzvq.png)


------------
    
    
## Answer \#4

 Vote: 4

Created at 2019-12-03 12:21:36

------------

Releases > Select a Release 

[](https://i.stack.imgur.com/piCXn.png)

Click the Artifact link (in blue eg: 20191125.1)

The new screen is the log. In the top right hand side, click the blue [Artifacts] button.

Choose Drop, expand the tree, and right click to download the file you want (probably the zip of the build)


------------
    
    
## Answer \#5

 Vote: 3

Created at 2021-02-03 21:20:08

------------

This is how I got it to work using PowerShell.
```
$MyPat = '********************************'
$B64Pat = [Convert]::ToBase64String([System.Text.Encoding]::UTF8.GetBytes(":$MyPat"))
$h = @{'Authorization' = 'Basic ' + $B64Pat}
$response = Invoke-WebRequest -Uri "https://dev.azure.com/{organization}/{project}/_apis/build/builds/{buildId}/artifacts?artifactName={artifactName}&api-version=4.1" -Method 'GET' -Headers $h
$response_json = ($response.Content | ConvertFrom-Json)
$response_artifact = Invoke-WebRequest -Uri $response_json.resource.downloadUrl -Method 'GET' -Headers $h
```



------------
    
    
## Answer \#6

 Vote: 2

Created at 2022-07-15 10:16:12

------------

The following works for me in PowerShell.
```
# Script to download the latest artifact from a DevOps build pipeline

# Configuration
$Company = '*********'
$Project = '*********'

$MyPat = '*********'

$DefinitionName = '*********'
$Branch = 'main'
$ArtifactName = 'drop'
$DownloadTo = 'C:\Downloads\Drop.zip'

# Build Auth header
$B64Pat = [Convert]::ToBase64String([System.Text.Encoding]::UTF8.GetBytes(":$MyPat"))
$h = @{'Authorization' = 'Basic ' + $B64Pat}

# Get build definition id
$response = Invoke-WebRequest -Uri "https://dev.azure.com/$($Company)/$($Project)/_apis/build/definitions?name=$($DefinitionName)&api-version=6.0" -Method 'GET' -Headers $h -UseBasicParsing
$response_json = ($response.Content | ConvertFrom-Json)
$DefinitionId = $response_json.value.id

# Get latest build id for named branch
$response = Invoke-WebRequest -Uri "https://dev.azure.com/$($Company)/$($Project)/_apis/build/latest/$($DefinitionId)?branchName=$($Branch)&api-version=6.0-preview" -Method 'GET' -Headers $h -UseBasicParsing
$response_json = ($response.Content | ConvertFrom-Json)
$BuildId = $response_json.id

# Download latest named artifact
$response = Invoke-WebRequest -Uri "https://dev.azure.com/$($Company)/$($Project)/_apis/build/builds/$($BuildId)/artifacts?artifactName=$($ArtifactName)&api-version=6.0" -Method 'GET' -Headers $h -UseBasicParsing
$response_json = ($response.Content | ConvertFrom-Json)
$response_json.resource.downloadUrl
$response_artifact = Invoke-WebRequest -Uri $response_json.resource.downloadUrl -Method 'GET' -Headers $h -UseBasicParsing -OutFile "$($DownloadTo)"
```

Where:
`$Company`  is your company name in the DevOps URL.
`$Project`  is your project in the DevOps URL.
`$MyPat`  is your PrivateAccessToken for authentication.
`$DefinitionName`  is the name of your build definition.
I hope this helps.


------------
    
    